<!--
 * Description:
 * Author:LinJ
 * Date:2021-11-09 16:49:03
 * LastEditors:LinJ
 * LastEditTime:2021-11-09 17:38:50
-->
<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<title>Mouse Shadow</title>
		<style>
			html {
				color: black;
				font-family: sans-serif;
			}

			body {
				margin: 0;
			}

			.hero {
				min-height: 100vh;
				display: flex;
				justify-content: center;
				align-items: center;
				color: black;
			}

			h1 {
				text-shadow: 10px 10px 0 rgba(0, 0, 0, 1);
				font-size: 100px;
			}
		</style>
	</head>
	<body>
		<div class="hero">
			<h1 contenteditable>ğŸ”¥WOAH!</h1>
		</div>

		<script>
      const hero = document.querySelector('.hero');
      const text = hero.querySelector('h1');
      // è·å–heroçš„å®½é«˜
      const { offsetWidth: width,offsetHeight: height } = hero;
      function throttle(func, wait = 20) {
        let timer;
        return function(...args){
          if(timer){
            return;
          }
          timer = setTimeout(() => {
            func.call(this, ...args);
            timer = null;
          }, wait)
        }
      }

      function shadowMove(e) {
        // å–å‡ºäº‹ä»¶å¯¹è±¡ç›¸å¯¹äºç›®æ ‡å¯¹è±¡(hero)å·¦ä¸Šè§’çš„åæ ‡
        let { offsetX: x, offsetY: y } = e;

        if (this !== e.target) {
          // åœ¨textå†…ç§»åŠ¨æ—¶ï¼Œéœ€è¦åŠ ä¸Štextå¯¹åº”çš„ç¦»å·¦è¾¹ä¸é¡¶éƒ¨çš„è·ç¦»
          x = x + e.target.offsetLeft;
          y = y + e.target.offsetTop;
        }
        // æ±‚å‡ºå½“å‰é¼ æ ‡åˆ°textä¸­å¿ƒçš„è·ç¦»
        const xWalk = Math.round((text.offsetLeft + text.offsetWidth / 2 ) - x) * 0.4;
        const yWalk = Math.round((text.offsetTop + text.offsetHeight / 2 ) - y) * 0.4;

        // é’ˆå¯¹textShadow è¿›è¡Œä¿®æ”¹
        text.style.textShadow = `
          ${xWalk}px ${yWalk}px 0 rgba(255,0,255,0.7),
          ${xWalk * -1}px ${yWalk}px 0 rgba(0,255,255,0.7),
          ${yWalk}px ${xWalk * -1}px 0 rgba(0,255,0,0.7),
          ${yWalk * -1}px ${xWalk}px 0 rgba(0,0,255,0.7)
        `;
      }
      hero.addEventListener("mousemove", throttle(shadowMove, 20));
    </script>
	</body>
</html>
